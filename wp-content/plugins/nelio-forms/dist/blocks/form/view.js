!function(){"use strict";var e=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function l(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,a)}c((r=r.apply(e,t||[])).next())}))},t=function(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((o=(o=l.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},n=function(n){var i,l;b(n),null===(i=n.querySelector(".nelio-forms-submit"))||void 0===i||i.addEventListener("auxclick",(function(e){return 1===e.button&&e.preventDefault()})),null===(l=n.querySelector(".nelio-forms-submit"))||void 0===l||l.addEventListener("click",(function(i){return e(void 0,void 0,void 0,(function(){var e,l;return t(this,(function(t){switch(t.label){case 0:return(e=i.target).dataset.isNelioFormProcessed?[2]:(i.preventDefault(),n.classList.contains(".nelio-forms-form--submitting")?[2]:(f(n,e),[4,r(n)]));case 1:return l=t.sent(),o(n,l),m(n,e),l.success&&(e.dataset.isNelioFormProcessed="true",l.data.redirection||e.click(),delete e.dataset.isNelioFormProcessed),[2]}}))}))}))};function r(n){var r,o;return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return[4,fetch(null!==(r=n.getAttribute("action"))&&void 0!==r?r:window.location.href,{method:null!==(o=n.getAttribute("method"))&&void 0!==o?o:"POST",body:new FormData(n)})];case 1:return(e=t.sent()).ok?[4,e.json()]:[2,{success:!1,data:{message:"An error has occured: ".concat(e.status)}}];case 2:return[2,t.sent()]}}))}))}var o=function(e,t){a(e,t),c(e,t),i(e,t),l(t)},i=function(e,t){t.success&&"true"===e.dataset.hideForm&&e.classList.add("nelio-forms-form--hidden")},l=function(e){e.success&&e.data.redirection&&(window.location.href=e.data.redirection)},a=function(e,t){var n=u(e);n.classList.toggle("nelio-forms__response--success",t.success),n.classList.toggle("nelio-forms__response--fail",!t.success),n.textContent=t.data.message},c=function(e,t){var n,r,o,i;if(!t.success){var l=t.data.errors;if(l){Object.keys(l).forEach((function(t){return function(e,t,n){var r=function(e,t){return document.getElementById("".concat(e.id,"__").concat(t))||void 0}(e,t);if(r){var o=function(e,t){return document.getElementById("".concat(e.id,"__").concat(t,"-error"))||function(e,t){var n,r,o,i=document.createElement("label");i.setAttribute("id","".concat(e.id,"__").concat(t,"-error")),i.setAttribute("for","".concat(e.id,"__").concat(t)),i.classList.add("nelio-forms-field__error-label");var l=null===(n=document.getElementById("".concat(e.id,"__").concat(t)))||void 0===n?void 0:n.parentElement;return(null===(r=null==l?void 0:l.classList)||void 0===r?void 0:r.contains("nelio-forms-field__value-container"))?null===(o=null==l?void 0:l.parentNode)||void 0===o||o.appendChild(i):null==l||l.appendChild(i),i}(e,t)}(e,t);r.classList.remove("nelio-forms-field__value--error"),o.innerHTML="",n.length&&(r.classList.add("nelio-forms-field__value--error"),n.forEach((function(e){var t=document.createElement("div");t.textContent=e,o.appendChild(t)})))}}(e,t,l[t])}));var a=null===(r=null===(n=e.querySelector(".nelio-forms-field__error-label > div"))||void 0===n?void 0:n.parentElement)||void 0===r?void 0:r.parentElement;a&&(s(a)||a.scrollIntoView({behavior:"smooth"}),null===(i=null===(o=e.querySelector(".nelio-forms-field__error-label > div"))||void 0===o?void 0:o.parentElement)||void 0===i||i.focus({preventScroll:!0}))}}},s=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},u=function(e){return e.querySelector(".nelio-forms__response")||d(e)},d=function(e){var t=document.createElement("div");return t.classList.add("nelio-forms__response"),e.appendChild(t),t},f=function(e,t){var n,r,o=e.dataset.submitProcessingLabel;o&&(t.setAttribute("data-label",t.innerText),t.innerHTML=o),function(e){Array.from(e.querySelectorAll(".nelio-forms-field__error-label")).forEach((function(e){var t;return null===(t=e.parentNode)||void 0===t?void 0:t.removeChild(e)}))}(e);var i=u(e);null===(n=i.parentNode)||void 0===n||n.removeChild(i),e.classList.add("nelio-forms-form--submitting"),null===(r=e.querySelector(".nelio-forms-submit"))||void 0===r||r.classList.add("nelio-forms-submit--disabled")},m=function(e,t){var n,r=t.dataset.label;r&&(t.innerHTML=r),null===(n=e.querySelector(".nelio-forms-submit"))||void 0===n||n.classList.remove("nelio-forms-submit--disabled"),e.classList.remove("nelio-forms-form--submitting")},v=function(e){return"FORM"===e.nodeName},b=function(e){return Array.from(e.querySelectorAll(".nelio-forms-form *[name]:not([id])")).forEach((function(t){var n,r,o=(null!==(n=t.getAttribute("name"))&&void 0!==n?n:"").replace("nelio_forms[fields][","").split("]")[0];if(o){var i="".concat(e.id,"__").concat(o);t.id=i;var l=function(e,t){for(var n=t.parentElement;n;){if(n.classList.contains("nelio-forms-field"))return n;n=n.parentElement}return n||void 0}(0,t);Array.from(null!==(r=null==l?void 0:l.querySelectorAll("label:not([for])"))&&void 0!==r?r:[]).forEach((function(e){return e.setAttribute("for",i)}))}}))};!function(e){if("undefined"!=typeof document){if("complete"!==document.readyState&&"interactive"!==document.readyState)return document.addEventListener("DOMContentLoaded",e);e()}}((function(){return Array.from(document.querySelectorAll(".nelio-forms-form")).filter(v).forEach(n)}))}();